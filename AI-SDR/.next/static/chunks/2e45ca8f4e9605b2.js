(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,14916,e=>{"use strict";e.s(["default",()=>B],14916);var s=e.i(43476),a=e.i(71645),t=e.i(22931),l=e.i(30909),i=e.i(15288),r=e.i(87486),n=e.i(19455),c=e.i(93479),d=e.i(67489),o=e.i(80376),m=e.i(76639),x=e.i(84774),h=e.i(46798),u=e.i(77572),p=e.i(17394),g=e.i(51305),j=e.i(55436),f=e.i(87130),N=e.i(75254);let v=(0,N.default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var b=e.i(63488),y=e.i(43432),w=e.i(86311),C=e.i(3116),S=e.i(95468),T=e.i(63209);let k=(0,N.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var A=e.i(58041),L=e.i(69074),I=e.i(74875),P=e.i(83086),D=e.i(16715),M=e.i(31278);let R=(0,N.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var _=e.i(18566);function B(){var e;let{leads:N}=(0,g.useJazonApp)(),B=(0,_.useRouter)(),[E,H]=(0,a.useState)(null),[V,q]=(0,a.useState)("all"),[O,z]=(0,a.useState)("all"),[U,F]=(0,a.useState)(""),[Q,J]=(0,a.useState)(!1),[W,K]=(0,a.useState)(!1),[G,Y]=(0,a.useState)([]),[X,Z]=(0,a.useState)(!0),[$,ee]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{Z(!0);let e=await fetch("/api/leads"),s=await e.json();if(s.success&&s.leads){let e=s.leads.filter(e=>"icp_scored"===e.status).map(e=>{var s,a,t,l,i,r,n,c;return{id:e._id,name:e.name,email:e.email||"N/A",company:(null==(s=e.company)?void 0:s.name)||"Unknown",title:e.title,icpScore:(null==(a=e.icp_score)?void 0:a.icp_score)||0,stage:"Qualification",channel:"Email",status:"Active",lastContact:"Not contacted yet",aiRecommendation:(null==(l=e.icp_score)||null==(t=l.strengths)?void 0:t[0])||"Processing...",industry:(null==(i=e.company)?void 0:i.industry)||"Unknown",companySize:(null==(n=e.company)||null==(r=n.company_size)?void 0:r.employee_count)?"".concat(e.company.company_size.employee_count.toLocaleString()," employees"):"Unknown",triggers:(null==(c=e.detected_signals)?void 0:c.map(e=>e.signal))||[],source:e.source||"CSV",ingestedAt:new Date(e.createdAt).toLocaleDateString(),importedBy:"CSV Upload",originTrigger:"CSV upload from Setup page",_dbLead:e}});Y(e)}}catch(e){console.error("Error fetching leads:",e)}finally{Z(!1)}})()},[]);let es=(0,a.useMemo)(()=>[...N,...G],[N,G]),ea=E?es.find(e=>e.id===E):null,et=E&&p.mockConversations[E]||[],el=E?p.mockQualificationData[E]:null,ei=E?p.mockMeetings.find(e=>e.leadId===E):null,er=et.filter(e=>"voice"===e.channel),en=(0,a.useMemo)(()=>es.filter(e=>{var s;let a=e.name.toLowerCase().includes(U.toLowerCase())||e.company.toLowerCase().includes(U.toLowerCase()),t="all"===V||e.stage===V,l="all"===O||(null==(s=e.source)?void 0:s.toLowerCase())===O.toLowerCase();return a&&t&&l}),[es,U,V,O]),ec=e=>e>=85?"text-chart-2":e>=70?"text-chart-4":"text-muted-foreground",ed=async()=>{K(!0);try{console.log("ðŸ”„ Refreshing leads with Research Agent...");let e=await fetch("/api/leads/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),s=await e.json();if(!e.ok)throw Error(s.error||s.message||"Failed to refresh leads");console.log("âœ… Refresh completed:",s),console.log("ðŸ“Š Processed:",s.processed,"leads"),console.log("ðŸ“¥ Agent responses:",s.responses),s.responses&&s.responses.length>0&&s.responses.forEach((e,s)=>{console.log("\nðŸ“‹ Response ".concat(s+1," for ").concat(e.leadName," (").concat(e.leadCompany,"):")),console.log(JSON.stringify(e.response,null,2))}),s.errors&&s.errors.length>0&&console.warn("âš ï¸ Errors during refresh:",s.errors),alert("Refresh completed! Processed ".concat(s.processed," lead(s). Check console for details."));let a=await fetch("/api/leads"),t=await a.json();if(t.success&&t.leads){let e=t.leads.filter(e=>"icp_scored"===e.status).map(e=>{var s,a,t,l,i,r,n,c;return{id:e._id,name:e.name,email:e.email||"N/A",company:(null==(s=e.company)?void 0:s.name)||"Unknown",title:e.title,icpScore:(null==(a=e.icp_score)?void 0:a.icp_score)||0,stage:"Qualification",channel:"Email",status:"Active",lastContact:"Not contacted yet",aiRecommendation:(null==(l=e.icp_score)||null==(t=l.strengths)?void 0:t[0])||"Processing...",industry:(null==(i=e.company)?void 0:i.industry)||"Unknown",companySize:(null==(n=e.company)||null==(r=n.company_size)?void 0:r.employee_count)?"".concat(e.company.company_size.employee_count.toLocaleString()," employees"):"Unknown",triggers:(null==(c=e.detected_signals)?void 0:c.map(e=>e.signal))||[],source:e.source||"CSV",ingestedAt:new Date(e.createdAt).toLocaleDateString(),importedBy:"CSV Upload",originTrigger:"CSV upload from Setup page",_dbLead:e}});Y(e)}}catch(e){console.error("âŒ Refresh error:",e),alert("Error: ".concat(e.message||"Failed to refresh leads"))}finally{K(!1)}},eo=async e=>{if(confirm("Are you sure you want to delete this lead? This will PERMANENTLY remove ALL related data including:\n\nâ€¢ Research & ICP scores\nâ€¢ Detected signals\nâ€¢ Outreach campaigns\nâ€¢ Outreach strategy & copy\nâ€¢ Outreach events\nâ€¢ Field overrides\nâ€¢ Company & Persona (if not used by other leads)\n\nThis action cannot be undone.")){ee(e);try{let s=await fetch("/api/leads/".concat(e),{method:"DELETE"}),a=await s.json();if(a.success){Y(s=>s.filter(s=>s.id!==e)),E===e&&H(null),alert("âœ… Lead and ALL related data deleted successfully!\n\nDeleted:\nâ€¢ Lead\nâ€¢ Research & ICP scores\nâ€¢ Outreach campaigns\nâ€¢ Outreach strategy & copy\nâ€¢ Outreach events\nâ€¢ Field overrides\nâ€¢ Company & Persona (if not shared)");let s=await fetch("/api/leads"),a=await s.json();if(a.success&&a.leads){let e=a.leads.filter(e=>"icp_scored"===e.status).map(e=>{var s,a,t,l,i,r,n,c;return{id:e._id,name:e.name,email:e.email||"N/A",company:(null==(s=e.company)?void 0:s.name)||"Unknown",title:e.title,icpScore:(null==(a=e.icp_score)?void 0:a.icp_score)||0,stage:"Qualification",channel:"Email",status:"Active",lastContact:"Not contacted yet",aiRecommendation:(null==(l=e.icp_score)||null==(t=l.strengths)?void 0:t[0])||"Processing...",industry:(null==(i=e.company)?void 0:i.industry)||"Unknown",companySize:(null==(n=e.company)||null==(r=n.company_size)?void 0:r.employee_count)?"".concat(e.company.company_size.employee_count.toLocaleString()," employees"):"Unknown",triggers:(null==(c=e.detected_signals)?void 0:c.map(e=>e.signal))||[],source:e.source||"CSV",ingestedAt:new Date(e.createdAt).toLocaleDateString(),importedBy:"CSV Upload",originTrigger:"CSV upload from Setup page",_dbLead:e}});Y(e)}}else alert("Failed to delete lead: ".concat(a.message||a.error))}catch(e){console.error("Error deleting lead:",e),alert("Failed to delete lead. Please try again.")}finally{ee(null)}}},em=e=>{switch(e){case"Qualification":case"Meeting Scheduled":return"default";case"Engaged":return"secondary";default:return"outline"}};return(0,s.jsxs)(l.SidebarProvider,{style:{"--sidebar-width":"calc(var(--spacing) * 60)","--header-height":"calc(var(--spacing) * 12)"},children:[(0,s.jsx)(t.JazonSidebar,{variant:"inset"}),(0,s.jsx)(l.SidebarInset,{className:"!overflow-x-hidden !max-w-full",children:(0,s.jsx)("div",{className:"flex flex-1 flex-col overflow-hidden w-full max-w-full",children:(0,s.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-6 md:p-6 overflow-y-auto overflow-x-hidden w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold text-foreground",children:"Leads"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"AI-powered system of record where Jazon evaluates, qualifies, and decides next actions for every lead."})]}),(0,s.jsx)(i.Card,{className:"w-full",children:(0,s.jsx)(i.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between w-full",children:[(0,s.jsxs)("div",{className:"flex flex-1 gap-2 min-w-0",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,s.jsx)(j.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(c.Input,{placeholder:"Search leads...",className:"pl-8",value:U,onChange:e=>F(e.target.value)})]}),(0,s.jsxs)(d.Select,{value:V,onValueChange:q,children:[(0,s.jsxs)(d.SelectTrigger,{className:"w-[180px]",children:[(0,s.jsx)(f.Filter,{className:"w-4 h-4 mr-2"}),(0,s.jsx)(d.SelectValue,{placeholder:"Filter by stage"})]}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"all",children:"All Stages"}),(0,s.jsx)(d.SelectItem,{value:"Qualification",children:"Qualification"}),(0,s.jsx)(d.SelectItem,{value:"Engaged",children:"Engaged"}),(0,s.jsx)(d.SelectItem,{value:"Meeting Scheduled",children:"Meeting Scheduled"}),(0,s.jsx)(d.SelectItem,{value:"Research",children:"Research"}),(0,s.jsx)(d.SelectItem,{value:"Disqualified",children:"Disqualified"})]})]}),(0,s.jsxs)(d.Select,{value:O,onValueChange:z,children:[(0,s.jsxs)(d.SelectTrigger,{className:"w-[180px]",children:[(0,s.jsx)(A.Database,{className:"w-4 h-4 mr-2"}),(0,s.jsx)(d.SelectValue,{placeholder:"Filter by source"})]}),(0,s.jsxs)(d.SelectContent,{children:[(0,s.jsx)(d.SelectItem,{value:"all",children:"All Sources"}),(0,s.jsx)(d.SelectItem,{value:"apollo",children:"Apollo"}),(0,s.jsx)(d.SelectItem,{value:"salesforce",children:"Salesforce"}),(0,s.jsx)(d.SelectItem,{value:"hubspot",children:"HubSpot"}),(0,s.jsx)(d.SelectItem,{value:"csv",children:"CSV"}),(0,s.jsx)(d.SelectItem,{value:"manual",children:"Manual"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,s.jsxs)(r.Badge,{variant:"secondary",className:"whitespace-nowrap",children:[en.length," leads"]}),(0,s.jsx)(n.Button,{variant:"outline",size:"sm",className:"gap-2 whitespace-nowrap",onClick:ed,disabled:W,children:W?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(M.Loader2,{className:"w-4 h-4 animate-spin"}),"Refreshing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(D.RefreshCw,{className:"w-4 h-4"}),"Refresh Leads"]})}),(0,s.jsxs)(n.Button,{variant:"default",size:"sm",className:"gap-2 whitespace-nowrap bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",onClick:()=>B.push("/leads/outbound"),children:[(0,s.jsx)(P.Sparkles,{className:"w-4 h-4"}),"Find Outbound Leads"]}),(0,s.jsxs)(m.Dialog,{open:Q,onOpenChange:J,children:[(0,s.jsx)(m.DialogTrigger,{asChild:!0,children:(0,s.jsxs)(n.Button,{variant:"outline",size:"sm",className:"gap-2 whitespace-nowrap",children:[(0,s.jsx)(k,{className:"w-4 h-4"}),"Add Leads"]})}),(0,s.jsxs)(m.DialogContent,{children:[(0,s.jsxs)(m.DialogHeader,{children:[(0,s.jsx)(m.DialogTitle,{children:"Add Leads"}),(0,s.jsx)(m.DialogDescription,{children:"Choose how to add leads to Jazon for AI processing"})]}),(0,s.jsxs)("div",{className:"grid gap-3 py-4",children:[(0,s.jsx)(n.Button,{variant:"outline",className:"h-auto p-4 justify-start",onClick:()=>{J(!1)},children:(0,s.jsxs)("div",{className:"flex items-start gap-3 w-full",children:[(0,s.jsx)(A.Database,{className:"w-5 h-5 mt-0.5 text-primary"}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsx)("p",{className:"font-medium",children:"Sync from CRM"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Connect Salesforce or HubSpot for automatic lead sync (demo)"})]})]})}),(0,s.jsx)(n.Button,{variant:"outline",className:"h-auto p-4 justify-start",onClick:()=>{J(!1)},children:(0,s.jsxs)("div",{className:"flex items-start gap-3 w-full",children:[(0,s.jsx)(L.Upload,{className:"w-5 h-5 mt-0.5 text-primary"}),(0,s.jsxs)("div",{className:"flex-1 text-left",children:[(0,s.jsx)("p",{className:"font-medium",children:"One-time CSV Upload"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"For pilots or demos only. Configure in Setup for production use."})]})]})})]})]})]})]})]})})}),(0,s.jsxs)(i.Card,{className:"w-full overflow-hidden",children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsx)(i.CardTitle,{children:"All Leads"}),(0,s.jsx)(i.CardDescription,{children:"Click any lead to drill down into AI decision reasoning and evidence"})]}),(0,s.jsx)(i.CardContent,{className:"p-0 w-full overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto w-full pl-4",style:{maxWidth:"calc(100vw - var(--sidebar-width) - 2rem)"},children:(0,s.jsx)(h.TooltipProvider,{children:(0,s.jsxs)(x.Table,{className:"min-w-max",children:[(0,s.jsx)(x.TableHeader,{children:(0,s.jsxs)(x.TableRow,{children:[(0,s.jsx)(x.TableHead,{children:"Lead"}),(0,s.jsx)(x.TableHead,{children:"Company"}),(0,s.jsx)(x.TableHead,{children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["ICP Score",(0,s.jsx)(v,{className:"w-3 h-3"})]})}),(0,s.jsx)(x.TableHead,{children:"Stage"}),(0,s.jsx)(x.TableHead,{children:"Lead Source"}),(0,s.jsx)(x.TableHead,{children:"Ingestion Date"}),(0,s.jsx)(x.TableHead,{children:"Channel"}),(0,s.jsx)(x.TableHead,{children:"Last Contact"}),(0,s.jsx)(x.TableHead,{className:"font-semibold",children:(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:["AI Recommendation",(0,s.jsxs)(h.Tooltip,{children:[(0,s.jsx)(h.TooltipTrigger,{asChild:!0,children:(0,s.jsx)(I.HelpCircle,{className:"w-3.5 h-3.5 text-muted-foreground cursor-help"})}),(0,s.jsx)(h.TooltipContent,{children:(0,s.jsx)("p",{children:"Hover over recommendations to see why Jazon made this decision"})})]})]})})]})}),(0,s.jsx)(x.TableBody,{children:en.map(e=>{var a,t,l;return(0,s.jsxs)(x.TableRow,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>H(e.id),children:[(0,s.jsx)(x.TableCell,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.title})]})}),(0,s.jsx)(x.TableCell,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.company}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.industry})]})}),(0,s.jsx)(x.TableCell,{children:(0,s.jsxs)(h.Tooltip,{children:[(0,s.jsx)(h.TooltipTrigger,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg ".concat((a=e.icpScore)>=85?"bg-chart-2/10":a>=70?"bg-chart-4/10":"bg-muted"),children:(0,s.jsx)("span",{className:"text-lg font-bold ".concat(ec(e.icpScore)),children:e.icpScore})}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:(t=e.icpScore)>=85?"High fit":t>=70?"Medium fit":"Low fit"})]})}),(0,s.jsx)(h.TooltipContent,{children:(0,s.jsxs)("p",{children:[e.icpScore>=85?"High fit":e.icpScore>=70?"Medium fit":"Low fit"," - ",e.icpScore,"/100 ICP score"]})})]})}),(0,s.jsx)(x.TableCell,{children:(0,s.jsxs)(h.Tooltip,{children:[(0,s.jsx)(h.TooltipTrigger,{asChild:!0,children:(0,s.jsx)(r.Badge,{variant:em(e.stage),className:"cursor-help",children:e.stage})}),(0,s.jsx)(h.TooltipContent,{children:(0,s.jsx)("p",{children:(e=>{switch(e){case"Research":return"AI validating ICP fit before initiating outreach";case"Engaged":return"AI nurturing with multi-channel sequence";case"Qualification":return"AI validating BANT signals (Need, Authority, Timeline, Budget)";case"Meeting Scheduled":return"Fully qualified - AI prepared AE handoff";case"Disqualified":return"AI determined low fit - saved AE time";default:return"AI processing lead"}})(e.stage)})})]})}),(0,s.jsx)(x.TableCell,{children:(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:["Apollo"===e.source&&(0,s.jsx)(j.Search,{className:"w-3.5 h-3.5 text-chart-3"}),"Salesforce"===e.source&&(0,s.jsx)(A.Database,{className:"w-3.5 h-3.5 text-primary"}),"HubSpot"===e.source&&(0,s.jsx)(A.Database,{className:"w-3.5 h-3.5 text-chart-2"}),"CSV"===e.source&&(0,s.jsx)(L.Upload,{className:"w-3.5 h-3.5 text-muted-foreground"}),(0,s.jsx)(r.Badge,{variant:"outline",className:"text-xs ".concat("Apollo"===e.source?"border-chart-3/30 bg-chart-3/5 text-chart-3":"Salesforce"===e.source?"border-primary/30 bg-primary/5":"HubSpot"===e.source?"border-chart-2/30 bg-chart-2/5 text-chart-2":""),children:e.source||"Unknown"})]})}),(0,s.jsx)(x.TableCell,{children:(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e.ingestedAt||"Not recorded"})}),(0,s.jsx)(x.TableCell,{children:(0,s.jsxs)(h.Tooltip,{children:[(0,s.jsx)(h.TooltipTrigger,{asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center gap-1.5 cursor-help",children:[(l=e.channel).includes("Email")?(0,s.jsx)(b.Mail,{className:"w-3 h-3"}):l.includes("Voice")?(0,s.jsx)(y.Phone,{className:"w-3 h-3"}):l.includes("LinkedIn")?(0,s.jsx)(w.MessageSquare,{className:"w-3 h-3"}):(0,s.jsx)(b.Mail,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"text-sm",children:e.channel})]})}),(0,s.jsx)(h.TooltipContent,{children:(0,s.jsx)("p",{children:e.channel.includes("Voice")?"Voice is only triggered when ICP score and engagement thresholds are met":"Multi-channel sequence. Voice escalation occurs when thresholds are met"})})]})}),(0,s.jsx)(x.TableCell,{children:(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[(0,s.jsx)(C.Clock,{className:"w-3 h-3"}),e.lastContact]})}),(0,s.jsx)(x.TableCell,{className:"max-w-xs",children:(0,s.jsxs)(h.Tooltip,{children:[(0,s.jsx)(h.TooltipTrigger,{asChild:!0,children:(0,s.jsx)("p",{className:"text-sm font-medium text-foreground truncate cursor-help",children:e.aiRecommendation})}),(0,s.jsxs)(h.TooltipContent,{className:"max-w-xs",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Why?"}),(0,s.jsx)("p",{className:"text-xs",children:(e=>{let s=[];return e.icpScore>=85&&s.push("ICP score ".concat(e.icpScore)),"Qualification"===e.stage&&s.push("High engagement signals"),"Meeting Scheduled"===e.stage&&s.push("BANT confirmed"),s.join(" â€¢ ")||"Evaluating lead"})(e)})]})]})}),(0,s.jsx)(x.TableCell,{className:"text-right",children:e._dbLead?(0,s.jsx)(h.TooltipProvider,{children:(0,s.jsxs)(h.Tooltip,{children:[(0,s.jsx)(h.TooltipTrigger,{asChild:!0,children:(0,s.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:s=>{s.stopPropagation(),eo(e.id)},disabled:$===e.id,className:"h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10",children:$===e.id?(0,s.jsx)(M.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(R,{className:"h-4 w-4"})})}),(0,s.jsx)(h.TooltipContent,{children:(0,s.jsx)("p",{children:"Delete lead and all related data"})})]})}):(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Mock"})})]},e.id)})})]})})})})]})]})})}),(0,s.jsx)(o.Sheet,{open:!!E,onOpenChange:e=>!e&&H(null),children:(0,s.jsx)(o.SheetContent,{className:"sm:max-w-2xl overflow-y-auto",children:ea&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.SheetHeader,{children:[(0,s.jsx)(o.SheetTitle,{children:ea.name}),(0,s.jsxs)(o.SheetDescription,{children:[ea.title," at ",ea.company]})]}),(0,s.jsxs)("div",{className:"mt-6 space-y-6 px-4 md:px-6",children:["Apollo"===ea.source&&(null==(e=ea.sourceMetadata)?void 0:e.apolloListName)&&(0,s.jsxs)(i.Card,{className:"border-chart-3/30 bg-chart-3/5",children:[(0,s.jsx)(i.CardHeader,{className:"pb-3",children:(0,s.jsxs)(i.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,s.jsx)(j.Search,{className:"w-4 h-4"}),"Lead Source"]})}),(0,s.jsxs)(i.CardContent,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Source"}),(0,s.jsx)("div",{className:"flex items-center gap-1.5",children:(0,s.jsx)(r.Badge,{variant:"outline",className:"text-xs border-chart-3/30 bg-chart-3/10 text-chart-3",children:"Apollo.io"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"List Name"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:ea.sourceMetadata.apolloListName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Imported Via"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"Outbound Ingestion"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Last Synced"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:ea.ingestedAt||"Unknown"})]})]}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-border/30",children:(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"This lead was sourced from Apollo and enriched by Jazon before outreach. All messaging is executed by Jazon (not Apollo sequences)."})})]})]}),(0,s.jsxs)(i.Card,{className:"border-primary/30 bg-primary/5 shadow-sm",children:[(0,s.jsx)(i.CardHeader,{children:(0,s.jsx)(i.CardTitle,{className:"text-base font-semibold",children:"Current AI Decision"})}),(0,s.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-foreground mb-2",children:ea.aiRecommendation}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(r.Badge,{variant:"default",className:"text-xs",children:[el&&el.overallScore>=80?"High":el&&el.overallScore>=60?"Medium":"Low"," Confidence"]}),el&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:[el.overallScore,"% overall qualification score"]})]})]}),(0,s.jsxs)("div",{className:"pt-2 border-t border-border/50",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1",children:"Expected Outcome"}),(0,s.jsxs)("p",{className:"text-sm text-foreground",children:["Qualification"===ea.stage&&"Voice escalation will accelerate qualification and increase meeting booking probability by 30%.","Meeting Scheduled"===ea.stage&&"AE handoff prepared with full context. High probability of pipeline opportunity based on qualification profile.","Engaged"===ea.stage&&"Continuing nurture sequence to build engagement before qualification attempt.","Disqualified"===ea.stage&&"Early disqualification prevents wasted AE time and focuses resources on higher-fit leads.","Research"===ea.stage&&"ICP validation in progress. Outreach will begin once fit is confirmed."]})]})]})]}),(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{children:(0,s.jsx)(i.CardTitle,{className:"text-sm",children:"Why Jazon Recommended This"})}),(0,s.jsx)(i.CardContent,{children:(0,s.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary mt-0.5",children:"â€¢"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"font-medium",children:"ICP Analysis:"})," Score of ",ea.icpScore," indicates ",ea.icpScore>=85?"strong alignment":ea.icpScore>=70?"moderate alignment":"weak alignment"," with ideal customer profile."]})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary mt-0.5",children:"â€¢"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Engagement Signals:"})," ","Qualification"===ea.stage&&"High engagement across multiple channels indicates readiness for deeper qualification.","Meeting Scheduled"===ea.stage&&"Fully qualified with confirmed need, authority, and timeline.","Engaged"===ea.stage&&"Positive initial responses, continuing nurture sequence.","Disqualified"===ea.stage&&"No alignment with ICP criteria or budget constraints identified.","Research"===ea.stage&&"Validating ICP fit before initiating outreach."]})]}),el&&el.overallScore>=80&&(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary mt-0.5",children:"â€¢"}),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Qualification Status:"})," ",el.overallScore,"% confidence with ",[el.need,el.timeline,el.authority,el.budget].filter(e=>e.known).length," of 4 BANT criteria confirmed."]})]})]})})]}),(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{children:(0,s.jsx)(i.CardTitle,{className:"text-sm",children:"Lead Snapshot"})}),(0,s.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1",children:"ICP Score"}),(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(ec(ea.icpScore)),children:[ea.icpScore,"/100"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:ea.icpScore>=85?"Excellent fit":ea.icpScore>=70?"Good fit":"Poor fit"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1",children:"Current Stage"}),(0,s.jsx)(r.Badge,{variant:em(ea.stage),className:"text-sm mb-1",children:ea.stage}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Last contact: ",ea.lastContact]})]})]}),ea.triggers.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Detected Triggers"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:ea.triggers.map((e,a)=>(0,s.jsx)(r.Badge,{variant:"secondary",className:"text-xs",children:e},a))})]}),(0,s.jsxs)("div",{className:"pt-2 border-t border-border/50",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Lead Origin"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Source:"})," ",(0,s.jsx)("span",{className:"font-medium",children:ea.source||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Ingested:"})," ",(0,s.jsx)("span",{className:"font-medium",children:ea.ingestedAt||"Not recorded"})]}),ea.importedBy&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Imported by:"})," ",(0,s.jsx)("span",{className:"font-medium",children:ea.importedBy})]}),ea.originTrigger&&(0,s.jsx)("div",{className:"col-span-2 text-xs text-muted-foreground",children:ea.originTrigger})]})]})]})]}),(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{children:(0,s.jsx)(i.CardTitle,{className:"text-sm",children:"Details"})}),(0,s.jsx)(i.CardContent,{children:(0,s.jsxs)(u.Tabs,{defaultValue:"activity",className:"w-full",children:[(0,s.jsxs)(u.TabsList,{className:"w-full justify-start",children:[(0,s.jsx)(u.TabsTrigger,{value:"activity",children:"Activity"}),(0,s.jsx)(u.TabsTrigger,{value:"qualification",children:"Qualification"}),er.length>0&&(0,s.jsx)(u.TabsTrigger,{value:"voice",children:"Voice Summary"}),ei&&(0,s.jsx)(u.TabsTrigger,{value:"handoff",children:"AE Handoff"})]}),(0,s.jsx)(u.TabsContent,{value:"activity",className:"mt-4",children:(0,s.jsx)("div",{className:"space-y-4",children:et.length>0?et.map(e=>(0,s.jsxs)("div",{className:"flex gap-3 pb-4 border-b last:border-0 last:pb-0",children:[(0,s.jsxs)("div",{className:"p-2 rounded-full h-fit shrink-0 ".concat("email"===e.channel?"bg-primary/10 text-primary":"voice"===e.channel?"bg-chart-2/10 text-chart-2":"bg-chart-3/10 text-chart-3"),children:["email"===e.channel&&(0,s.jsx)(b.Mail,{className:"w-4 h-4"}),"voice"===e.channel&&(0,s.jsx)(y.Phone,{className:"w-4 h-4"}),"linkedin"===e.channel&&(0,s.jsx)(w.MessageSquare,{className:"w-4 h-4"})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)(r.Badge,{variant:"outline",className:"text-xs mb-1",children:[e.channel," â€¢ ",e.direction]}),e.subject&&(0,s.jsx)("p",{className:"font-medium text-sm truncate",children:e.subject})]}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground shrink-0",children:e.timestamp})]}),e.summary?(0,s.jsxs)("div",{className:"bg-muted/50 rounded p-2 space-y-2",children:[(0,s.jsx)("p",{className:"text-sm",children:e.summary}),e.duration&&(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Duration: ",e.duration," â€¢ Outcome: ",e.outcome]}),e.objections&&e.objections.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium mt-2 mb-1",children:"Objections raised:"}),(0,s.jsx)("ul",{className:"text-xs text-muted-foreground space-y-1",children:e.objections.map((e,a)=>(0,s.jsxs)("li",{children:["â€¢ ",e]},a))})]})]}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.content})]})]},e.id)):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No conversation history yet"})})}),(0,s.jsx)(u.TabsContent,{value:"qualification",className:"mt-4",children:el?(0,s.jsxs)("div",{className:"space-y-4",children:[Object.entries({Need:el.need,Timeline:el.timeline,Authority:el.authority,Budget:el.budget}).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"pb-3 border-b last:border-0 last:pb-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:a}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Badge,{variant:t.known?"default":"outline",className:"text-xs",children:t.known?"Confirmed":"Unknown"}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:[t.confidence,"% confidence"]})]})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:t.value})]},a)}),(0,s.jsxs)("div",{className:"pt-3 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Overall Qualification Score"}),(0,s.jsxs)(r.Badge,{variant:"default",className:"text-sm",children:[el.overallScore,"%"]})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Recommendation: ","book_meeting"===el.recommendation?"Book meeting":"nurture"===el.recommendation?"Continue nurture":"Disqualify"]})]})]}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Qualification in progress"})}),er.length>0&&(0,s.jsx)(u.TabsContent,{value:"voice",className:"mt-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-muted/30 rounded-lg p-3 border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(y.Phone,{className:"w-4 h-4 text-chart-2"}),(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Voice Escalation (Conditional)"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"Voice was used as an escalation when engagement and ICP score crossed the configured threshold."})]}),er.map(e=>(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(r.Badge,{variant:"outline",className:"text-xs",children:e.timestamp}),e.duration&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Duration: ",e.duration]})]}),e.summary&&(0,s.jsxs)("div",{className:"bg-muted/50 rounded p-3 space-y-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-1",children:"Call Summary"}),(0,s.jsx)("p",{className:"text-sm text-foreground",children:e.summary}),e.outcome&&(0,s.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-border/50",children:[(0,s.jsx)(S.CheckCircle2,{className:"w-4 h-4 text-chart-2"}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:["Outcome: ",e.outcome]})]}),e.objections&&e.objections.length>0&&(0,s.jsxs)("div",{className:"pt-2 border-t border-border/50",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Objections Raised:"}),(0,s.jsx)("ul",{className:"space-y-1",children:e.objections.map((e,a)=>(0,s.jsxs)("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(T.AlertCircle,{className:"w-4 h-4 mt-0.5 shrink-0"}),(0,s.jsx)("span",{children:e})]},a))})]})]})]},e.id))]})}),ei&&(0,s.jsx)(u.TabsContent,{value:"handoff",className:"mt-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-primary/5 rounded-lg p-4 border border-primary/20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(S.CheckCircle2,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("p",{className:"text-sm font-semibold",children:"Meeting Scheduled"})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[ei.scheduledFor," â€¢ Status: ",ei.status]})]}),ei.handoffPack&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Research Summary"}),(0,s.jsx)("p",{className:"text-sm text-foreground",children:ei.handoffPack.researchSummary})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Qualification Notes"}),(0,s.jsx)("ul",{className:"space-y-1",children:ei.handoffPack.qualificationNotes.map((e,a)=>(0,s.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-primary mt-0.5",children:"â€¢"}),(0,s.jsx)("span",{children:e})]},a))})]}),ei.handoffPack.objectionsRaised.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Objections Raised"}),(0,s.jsx)("ul",{className:"space-y-1",children:ei.handoffPack.objectionsRaised.map((e,a)=>(0,s.jsxs)("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(T.AlertCircle,{className:"w-4 h-4 mt-0.5 shrink-0"}),(0,s.jsx)("span",{children:e})]},a))})]}),ei.handoffPack.suggestedTalkTrack.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Suggested Talk Track"}),(0,s.jsx)("ul",{className:"space-y-2",children:ei.handoffPack.suggestedTalkTrack.map((e,a)=>(0,s.jsx)("li",{className:"text-sm text-foreground",children:e},a))})]}),ei.handoffPack.whyBooked&&(0,s.jsxs)("div",{className:"pt-3 border-t",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2",children:"Why This Meeting Was Booked"}),(0,s.jsx)("p",{className:"text-sm text-foreground",children:ei.handoffPack.whyBooked})]})]})]})})]})})]})]})]})})})]})}}]);