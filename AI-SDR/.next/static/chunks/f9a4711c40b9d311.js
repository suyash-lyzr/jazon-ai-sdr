(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40491,e=>{"use strict";e.s(["default",()=>z],40491);var s=e.i(43476),a=e.i(71645),i=e.i(22931),t=e.i(30909),n=e.i(15288),l=e.i(87486),r=e.i(19455),c=e.i(68148),o=e.i(67489),d=e.i(7308),m=e.i(80376),u=e.i(93479),x=e.i(24687),p=e.i(10204),h=e.i(17394),g=e.i(51305),j=e.i(7486),f=e.i(84614),v=e.i(39312),y=e.i(64659),N=e.i(63059),b=e.i(95468),_=e.i(63209),w=e.i(3116);let k=(0,e.i(75254).default)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var C=e.i(16715),S=e.i(82293),F=e.i(83627);function z(){var e,z,I,L,A,T,B,P,D,R,U,M,E,q,H,O,K,V,W,J,Y,G,Q,Z,$,X,ee,es,ea,ei,et,en;let{leads:el}=(0,g.useJazonApp)(),[er,ec]=(0,a.useState)(null),[eo,ed]=(0,a.useState)({company:!1,persona:!1,timing:!1}),[em,eu]=(0,a.useState)([]),[ex,ep]=(0,a.useState)(null),[eh,eg]=(0,a.useState)(!1),[ej,ef]=(0,a.useState)({open:!1,section:null}),[ev,ey]=(0,a.useState)({}),[eN,eb]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/leads"),s=await e.json();if(s.success&&s.leads){let e=s.leads.map(e=>{var s,a;return{id:e._id,name:e.name,company:(null==(s=e.company)?void 0:s.name)||"Unknown",icpScore:(null==(a=e.icp_score)?void 0:a.icp_score)||0,_dbLead:e}});eu(e)}}catch(e){console.error("Error fetching leads:",e)}})()},[]);let e_=(0,a.useMemo)(()=>[...el.map(e=>({...e,_dbLead:null})),...em],[el,em]),ew=(0,a.useMemo)(()=>0===e_.length?null:e_.reduce((e,s)=>s.icpScore>e.icpScore?s:e),[e_]),ek=er&&e_.find(e=>e.id===er)||ew;(0,a.useEffect)(()=>{(async()=>{if(!ek||!ek._dbLead)return ep(null);eg(!0);try{let e=await fetch("/api/leads/".concat(ek.id)),s=await e.json();s.success&&ep(s.lead)}catch(e){console.error("Error fetching lead data:",e)}finally{eg(!1)}})()},[null==ek?void 0:ek.id]);let eC=e=>{var s,a,i,t,n,l,r,c,o,d,m,u,x,p,h,g,j,f,v,y;if(!ex)return;let N={},b=e=>null==e?"":"string"==typeof e?e:"object"==typeof e?e.city&&e.state?"".concat(e.city,", ").concat(e.state):e.city?e.city:e.country?e.country:"":String(e);"company"===e?N={industry:b(null==(s=ex.company)?void 0:s.industry),employee_count:(null==(i=ex.company)||null==(a=i.company_size)?void 0:a.employee_count)||"",annual_revenue_usd:(null==(n=ex.company)||null==(t=n.company_size)?void 0:t.annual_revenue_usd)||"",keywords:((null==(l=ex.company)?void 0:l.keywords)||[]).join("\n"),sales_motion:b(null==(r=ex.company)?void 0:r.sales_motion),headquarters:b(null==(c=ex.company)?void 0:c.headquarters),linkedin_url:b(null==(o=ex.company)?void 0:o.linkedin_url),website_url:b(null==(d=ex.company)?void 0:d.website_url)}:"persona"===e&&(N={seniority:b(null==(m=ex.persona)?void 0:m.seniority),reports_to:b(null==(u=ex.persona)?void 0:u.reports_to),department:b(null==(x=ex.persona)?void 0:x.department),location:b(null==(p=ex.persona)?void 0:p.location),responsibilities:((null==(h=ex.persona)?void 0:h.responsibilities)||[]).join("\n"),pain_points:((null==(g=ex.persona)?void 0:g.pain_points)||[]).join("\n"),decision_authority_rationale:b(null==(f=ex.persona)||null==(j=f.decision_authority)?void 0:j.rationale),decision_maker_likelihood:b(null==(y=ex.persona)||null==(v=y.decision_authority)?void 0:v.decision_maker_likelihood)}),ey(N),ef({open:!0,section:e})},eS=async()=>{if(ek&&ek._dbLead&&ej.section){eb(!0);try{let e=[];if("company"===ej.section){if(ev.industry&&e.push({field:"industry",value:ev.industry,target:"company"}),ev.employee_count&&e.push({field:"employee_count",value:parseFloat(ev.employee_count),target:"company.company_size"}),ev.annual_revenue_usd&&e.push({field:"annual_revenue_usd",value:parseFloat(ev.annual_revenue_usd),target:"company.company_size"}),ev.keywords){let s=ev.keywords.split("\n").map(e=>e.trim()).filter(e=>e.length>0);e.push({field:"keywords",value:s,target:"company"})}ev.sales_motion&&e.push({field:"sales_motion",value:ev.sales_motion,target:"company"}),ev.headquarters&&e.push({field:"headquarters",value:ev.headquarters,target:"company"}),ev.linkedin_url&&e.push({field:"linkedin_url",value:ev.linkedin_url,target:"company"}),ev.website_url&&e.push({field:"website_url",value:ev.website_url,target:"company"})}else if("persona"===ej.section){if(ev.seniority&&e.push({field:"seniority",value:ev.seniority,target:"persona"}),ev.reports_to&&e.push({field:"reports_to",value:ev.reports_to,target:"persona"}),ev.department&&e.push({field:"department",value:ev.department,target:"persona"}),ev.location&&e.push({field:"location",value:ev.location,target:"persona"}),ev.responsibilities){let s=ev.responsibilities.split("\n").map(e=>e.trim()).filter(e=>e.length>0);e.push({field:"responsibilities",value:s,target:"persona"})}if(ev.pain_points){let s=ev.pain_points.split("\n").map(e=>e.trim()).filter(e=>e.length>0);e.push({field:"pain_points",value:s,target:"persona"})}ev.decision_authority_rationale&&e.push({field:"rationale",value:ev.decision_authority_rationale,target:"persona.decision_authority"}),ev.decision_maker_likelihood&&e.push({field:"decision_maker_likelihood",value:ev.decision_maker_likelihood,target:"persona.decision_authority"})}for(let s of e)await fetch("/api/leads/".concat(ek.id,"/update-field"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});let s=await fetch("/api/leads/".concat(ek.id)),a=await s.json();a.success&&ep(a.lead),ef({open:!1,section:null})}catch(e){console.error("Error saving fields:",e),alert("Failed to save changes")}finally{eb(!1)}}},{companyAnalysis:eF,personaAnalysis:ez,triggers:eI,icpScore:eL}=(null==ex?void 0:ex.icp_score)&&(null==ex?void 0:ex.company)?{icpScore:{overall:(null==(e=ex.icp_score)?void 0:e.icp_score)||0,breakdown:{companyFit:{score:(null==(z=ex.icp_score.score_breakdown)?void 0:z.company_fit)||0,factors:(null==(L=ex.icp_score.factor_breakdown)||null==(I=L.companyFit)?void 0:I.factors)||[{name:"Company size",value:0,weight:30},{name:"Industry match",value:0,weight:25},{name:"Tech stack compatibility",value:0,weight:20}]},personaFit:{score:(null==(A=ex.icp_score.score_breakdown)?void 0:A.persona_fit)||0,factors:(null==(B=ex.icp_score.factor_breakdown)||null==(T=B.personaFit)?void 0:T.factors)||[{name:"Decision authority",value:0,weight:35},{name:"Seniority level",value:0,weight:20}]},timingFit:{score:(null==(P=ex.icp_score.score_breakdown)?void 0:P.timing_fit)||0,factors:(null==(R=ex.icp_score.factor_breakdown)||null==(D=R.timingFit)?void 0:D.factors)||[{name:"Active triggers",value:0,weight:40}]}},explanation:(null==(U=ex.icp_score.strengths)?void 0:U.join(". "))||"No explanation available"},companyAnalysis:{name:(null==(M=ex.company)?void 0:M.name)||"Unknown",industry:(null==(E=ex.company)?void 0:E.industry)||"Unknown",size:(null==(H=ex.company)||null==(q=H.company_size)?void 0:q.employee_count)?"".concat(ex.company.company_size.employee_count.toLocaleString()," employees globally"):"Unknown",revenue:(null==(K=ex.company)||null==(O=K.company_size)?void 0:O.annual_revenue_usd)?"$".concat((ex.company.company_size.annual_revenue_usd/1e9).toFixed(1),"B"):"Unknown",structure:(null==(W=ex.company)||null==(V=W.company_size)?void 0:V.is_public)?"Public company".concat(ex.company.company_size.ticker?" (".concat(ex.company.company_size.ticker,")"):""):"Private company",techStack:(null==(Y=ex.company)||null==(J=Y.technographics)?void 0:J.map(e=>e.name).join(", "))||"Unknown",salesMotion:(null==(G=ex.company)?void 0:G.sales_motion)||"Unknown"},personaAnalysis:{title:ex.title||"Unknown",seniority:(null==(Q=ex.persona)?void 0:Q.seniority)||"Unknown",reportingStructure:(null==(Z=ex.persona)?void 0:Z.reports_to)||"Unknown",responsibilities:(null==($=ex.persona)?void 0:$.responsibilities)||[],painPoints:(null==(X=ex.persona)?void 0:X.pain_points)||[],decisionAuthority:(null==(es=ex.persona)||null==(ee=es.decision_authority)?void 0:ee.rationale)||((null==(ei=ex.persona)||null==(ea=ei.decision_authority)?void 0:ea.decision_maker_likelihood)?"Decision maker likelihood: ".concat(ex.persona.decision_authority.decision_maker_likelihood):"Unknown")},triggers:(ex.detected_signals||[]).map(e=>{var s;return{type:e.type||"general",signal:e.signal||"Signal detected",source:e.source||"Research",strength:(null==(s=e.strength)?void 0:s.toLowerCase())||"medium",recency:e.recency||"Detected in research"}})}:h.mockICPData,eA=(0,a.useMemo)(()=>{if(!ek)return[];let e=[];return ek.icpScore>=85?(e.push("Strong enterprise fit based on company size and tech stack compatibility"),e.push("Confirmed decision-maker with budget authority for sales tools"),e.push("Active buying signals detected in the last 30 days"),"Qualification"===ek.stage&&e.push("High likelihood to convert if engaged via voice escalation"),e.push("Historical conversion rate of 78% for similar profiles")):ek.icpScore>=70?(e.push("Moderate fit with some alignment gaps in company profile"),e.push("Decision authority confirmed but budget timeline uncertain"),e.push("Some buying signals present but not as strong as high-fit leads")):(e.push("Weak fit - company size or industry may not align with ideal customer profile"),e.push("Limited buying signals detected"),e.push("May require extended nurture cycle before qualification")),e},[ek]);return(0,s.jsxs)(t.SidebarProvider,{style:{"--sidebar-width":"calc(var(--spacing) * 60)","--header-height":"calc(var(--spacing) * 12)"},children:[(0,s.jsx)(i.JazonSidebar,{variant:"inset"}),(0,s.jsxs)(t.SidebarInset,{children:[(0,s.jsx)("div",{className:"flex flex-1 flex-col",children:(0,s.jsxs)("div",{className:"flex flex-1 flex-col gap-6 p-4 md:gap-8 md:p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold text-foreground",children:"Research & ICP Analysis"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Deep intelligence gathering to prove AI understanding"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0 max-w-md",children:[(0,s.jsx)("label",{className:"text-xs text-muted-foreground shrink-0",children:"Lead:"}),(0,s.jsxs)(o.Select,{value:er||(null==ew?void 0:ew.id)||"",onValueChange:ec,children:[(0,s.jsx)(o.SelectTrigger,{className:"w-full",children:(0,s.jsx)(o.SelectValue,{placeholder:"Choose a lead to analyze"})}),(0,s.jsx)(o.SelectContent,{children:e_.sort((e,s)=>s.icpScore-e.icpScore).map(e=>(0,s.jsx)(o.SelectItem,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full gap-4",children:[(0,s.jsx)("span",{className:"font-medium",children:e.name}),(0,s.jsx)("span",{className:"text-muted-foreground",children:e.company}),(0,s.jsxs)(l.Badge,{variant:"outline",className:"ml-auto",children:["ICP ",e.icpScore]})]})},e.id))})]})]})]}),ek&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-muted/30 rounded-xl p-4 border border-border/50",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-5xl font-bold ".concat((et=ek.icpScore)>=85?"text-chart-2":et>=70?"text-chart-4":"text-muted-foreground"),children:ek.icpScore}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1 text-center",children:"out of 100"})]}),(0,s.jsx)("div",{className:"h-12 w-px bg-border"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-1",children:ek.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[ek.title," at ",ek.company]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsx)(l.Badge,{variant:ek.icpScore>=85?"default":ek.icpScore>=70?"secondary":"outline",className:"text-sm",children:(en=ek.icpScore)>=85?"Excellent Fit":en>=70?"Good Fit":"Weak Fit"}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,s.jsx)(w.Clock,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"Updated 2 hours ago"})]})]})]})}),(0,s.jsxs)(n.Card,{children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{children:"AI Summary"}),(0,s.jsxs)(n.CardDescription,{children:["Key insights explaining why this lead is a"," ",ek.icpScore>=85?"strong":ek.icpScore>=70?"moderate":"weak"," ","fit"]})]}),(0,s.jsx)(n.CardContent,{children:(0,s.jsx)("ul",{className:"space-y-3",children:eA.map((e,a)=>(0,s.jsxs)("li",{className:"flex items-start gap-3 text-sm",children:[(0,s.jsx)(b.CheckCircle2,{className:"w-4 h-4 text-chart-2 mt-0.5 shrink-0"}),(0,s.jsx)("span",{className:"text-foreground leading-relaxed",children:e})]},a))})})]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(n.Card,{children:[(0,s.jsx)(n.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(j.Building2,{className:"w-5 h-5"}),"Company Analysis"]}),(0,s.jsx)(n.CardDescription,{className:"mt-2",children:eF.name})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(l.Badge,{variant:"secondary",className:"text-xs",children:"LinkedIn"}),(0,s.jsx)(l.Badge,{variant:"secondary",className:"text-xs",children:"CRM"}),(0,s.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:"Perplexity"})]}),ex&&(0,s.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>eC("company"),className:"h-6 px-2 gap-1.5 text-xs",children:[(0,s.jsx)(F.Edit3,{className:"h-3 w-3"}),"Edit"]})]})]})}),(0,s.jsxs)(n.CardContent,{className:"space-y-5",children:[(0,s.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 space-y-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Industry"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:eF.industry})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Company Size"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:eF.size})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Annual Revenue"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:eF.revenue})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Structure"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:eF.structure})]})]})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Tech Stack"}),(0,s.jsx)("div",{className:"flex gap-1",children:(0,s.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:"Verified"})})]}),(0,s.jsx)("p",{className:"text-sm leading-relaxed",children:eF.techStack})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Sales Motion"}),(0,s.jsx)("div",{className:"flex gap-1",children:(0,s.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:"AI Inferred"})})]}),(0,s.jsx)("p",{className:"text-sm leading-relaxed",children:eF.salesMotion})]})]})]}),(0,s.jsxs)(n.Card,{children:[(0,s.jsx)(n.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(f.User,{className:"w-5 h-5"}),"Persona Analysis"]}),(0,s.jsx)(n.CardDescription,{className:"mt-2",children:ez.title})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(l.Badge,{variant:"secondary",className:"text-xs",children:"LinkedIn"}),(0,s.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:"Conversations"})]}),ex&&(0,s.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>eC("persona"),className:"h-6 px-2 gap-1.5 text-xs",children:[(0,s.jsx)(F.Edit3,{className:"h-3 w-3"}),"Edit"]})]})]})}),(0,s.jsxs)(n.CardContent,{className:"space-y-5",children:[(0,s.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 space-y-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Seniority"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:ez.seniority})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Reports To"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:ez.reportingStructure})]})]})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Key Responsibilities"}),(0,s.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:"Verified"})]}),(0,s.jsx)("ul",{className:"space-y-2",children:ez.responsibilities.map((e,a)=>(0,s.jsxs)("li",{className:"text-sm flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-primary mt-0.5",children:"â€¢"}),(0,s.jsx)("span",{className:"leading-relaxed",children:e})]},a))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Pain Points"}),(0,s.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:"AI Inferred"})]}),(0,s.jsx)("ul",{className:"space-y-2",children:ez.painPoints.map((e,a)=>(0,s.jsxs)("li",{className:"text-sm flex items-start gap-2",children:[(0,s.jsx)(_.AlertCircle,{className:"w-4 h-4 text-destructive mt-0.5 shrink-0"}),(0,s.jsx)("span",{className:"leading-relaxed",children:e})]},a))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Decision Authority"}),(0,s.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:"Confirmed"})]}),(0,s.jsx)("p",{className:"text-sm leading-relaxed",children:ez.decisionAuthority})]})]})]})]}),(0,s.jsxs)(n.Card,{children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(v.Zap,{className:"w-5 h-5 text-chart-4"}),"Detected Triggers"]}),(0,s.jsx)(n.CardDescription,{children:"Real-time buying signals indicating readiness to engage"})]}),(0,s.jsx)(n.CardContent,{children:(0,s.jsx)("div",{className:"space-y-3",children:eI.map((e,a)=>(0,s.jsxs)("div",{className:"bg-muted/20 rounded-lg p-4 border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Badge,{variant:"high"===e.strength?"default":"secondary",className:"text-xs",children:e.type}),(0,s.jsxs)(l.Badge,{variant:"outline",className:"text-xs",children:[e.strength," strength"]})]}),(0,s.jsx)(l.Badge,{variant:"default",className:"text-xs bg-chart-2 shrink-0",children:"Used in ICP scoring"})]}),(0,s.jsx)("p",{className:"font-medium text-sm mb-3 leading-relaxed",children:e.signal}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground pt-2 border-t border-border/30",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{children:"Source:"}),(0,s.jsx)("span",{className:"font-medium",children:e.source})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(w.Clock,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.recency})]})]})]},a))})})]}),(0,s.jsxs)(n.Card,{children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsx)(n.CardTitle,{children:"ICP Score Breakdown"}),(0,s.jsx)(n.CardDescription,{children:"Expand each category to view detailed factor analysis with weighted scoring"})]}),(0,s.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,s.jsxs)(d.Collapsible,{open:eo.company,onOpenChange:e=>ed(s=>({...s,company:e})),children:[(0,s.jsx)(d.CollapsibleTrigger,{className:"w-full",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-muted/30 rounded-lg transition-colors border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[eo.company?(0,s.jsx)(y.ChevronDown,{className:"w-4 h-4 text-muted-foreground"}):(0,s.jsx)(N.ChevronRight,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsx)("h3",{className:"font-semibold text-base",children:"Company Fit"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Score:"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-chart-2",children:eL.breakdown.companyFit.score})]})]})}),(0,s.jsx)(d.CollapsibleContent,{className:"pt-4",children:(0,s.jsx)("div",{className:"space-y-3 px-4 pb-2",children:eL.breakdown.companyFit.factors.map((e,a)=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-foreground",children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.value,"/100 (",e.weight,"% weight)"]})]}),(0,s.jsx)(c.Progress,{value:e.value,className:"h-2"})]},a))})})]}),(0,s.jsxs)(d.Collapsible,{open:eo.persona,onOpenChange:e=>ed(s=>({...s,persona:e})),children:[(0,s.jsx)(d.CollapsibleTrigger,{className:"w-full",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-muted/30 rounded-lg transition-colors border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[eo.persona?(0,s.jsx)(y.ChevronDown,{className:"w-4 h-4 text-muted-foreground"}):(0,s.jsx)(N.ChevronRight,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsx)("h3",{className:"font-semibold text-base",children:"Persona Fit"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Score:"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-chart-2",children:eL.breakdown.personaFit.score})]})]})}),(0,s.jsx)(d.CollapsibleContent,{className:"pt-4",children:(0,s.jsx)("div",{className:"space-y-3 px-4 pb-2",children:eL.breakdown.personaFit.factors.map((e,a)=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-foreground",children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.value,"/100 (",e.weight,"% weight)"]})]}),(0,s.jsx)(c.Progress,{value:e.value,className:"h-2"})]},a))})})]}),(0,s.jsxs)(d.Collapsible,{open:eo.timing,onOpenChange:e=>ed(s=>({...s,timing:e})),children:[(0,s.jsx)(d.CollapsibleTrigger,{className:"w-full",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-muted/30 rounded-lg transition-colors border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[eo.timing?(0,s.jsx)(y.ChevronDown,{className:"w-4 h-4 text-muted-foreground"}):(0,s.jsx)(N.ChevronRight,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsx)("h3",{className:"font-semibold text-base",children:"Timing Fit"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Score:"}),(0,s.jsx)("span",{className:"text-2xl font-bold text-chart-2",children:eL.breakdown.timingFit.score})]})]})}),(0,s.jsx)(d.CollapsibleContent,{className:"pt-4",children:(0,s.jsx)("div",{className:"space-y-3 px-4 pb-2",children:eL.breakdown.timingFit.factors.map((e,a)=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-foreground",children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.value,"/100 (",e.weight,"% weight)"]})]}),(0,s.jsx)(c.Progress,{value:e.value,className:"h-2"})]},a))})})]})]})]}),(0,s.jsxs)("div",{className:"bg-muted/30 rounded-xl p-6 border border-border/50",children:[(0,s.jsx)("div",{className:"flex items-start justify-between gap-6 mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-1",children:"Next Actions"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Use this research to drive revenue workflows"})]})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,s.jsxs)(r.Button,{size:"default",className:"gap-2",children:[(0,s.jsx)(k,{className:"w-4 h-4"}),"Start outreach using this research"]}),(0,s.jsxs)(r.Button,{variant:"outline",size:"default",className:"gap-2",children:[(0,s.jsx)(C.RefreshCw,{className:"w-4 h-4"}),"Re-run research"]}),(0,s.jsxs)(r.Button,{variant:"outline",size:"default",className:"gap-2",children:[(0,s.jsx)(_.AlertCircle,{className:"w-4 h-4"}),"Override AI decision"]}),(0,s.jsxs)(r.Button,{variant:"outline",size:"default",className:"gap-2",children:[(0,s.jsx)(S.UserCheck,{className:"w-4 h-4"}),"Send to AE for review"]})]})]})]})]})}),(0,s.jsx)(m.Sheet,{open:ej.open,onOpenChange:e=>ef({...ej,open:e}),children:(0,s.jsxs)(m.SheetContent,{className:"w-[600px] sm:w-[800px] overflow-y-auto",children:[(0,s.jsxs)(m.SheetHeader,{className:"px-6",children:[(0,s.jsxs)(m.SheetTitle,{className:"text-xl font-semibold",children:["Edit ","company"===ej.section?"Company":"Persona"," ","Information"]}),(0,s.jsx)(m.SheetDescription,{className:"text-sm text-muted-foreground",children:"Update the fields below. All fields are prefilled with AI research data and can be edited."})]}),(0,s.jsxs)("div",{className:"px-6 py-6 space-y-6",children:["company"===ej.section&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"industry",className:"text-sm font-medium",children:"Industry"}),(0,s.jsx)(u.Input,{id:"industry",value:ev.industry||"",onChange:e=>ey({...ev,industry:e.target.value}),placeholder:"e.g., E-commerce, SaaS, Manufacturing",className:"w-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"employee_count",className:"text-sm font-medium",children:"Employee Count"}),(0,s.jsx)(u.Input,{id:"employee_count",type:"number",value:ev.employee_count||"",onChange:e=>ey({...ev,employee_count:e.target.value}),placeholder:"e.g., 500",className:"w-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"annual_revenue_usd",className:"text-sm font-medium",children:"Annual Revenue (USD)"}),(0,s.jsx)(u.Input,{id:"annual_revenue_usd",type:"number",value:ev.annual_revenue_usd||"",onChange:e=>ey({...ev,annual_revenue_usd:e.target.value}),placeholder:"e.g., 50000000",className:"w-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"headquarters",className:"text-sm font-medium",children:"Headquarters"}),(0,s.jsx)(u.Input,{id:"headquarters",value:ev.headquarters||"",onChange:e=>ey({...ev,headquarters:e.target.value}),placeholder:"e.g., San Francisco, CA",className:"w-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"linkedin_url",className:"text-sm font-medium",children:"LinkedIn URL"}),(0,s.jsx)(u.Input,{id:"linkedin_url",value:ev.linkedin_url||"",onChange:e=>ey({...ev,linkedin_url:e.target.value}),placeholder:"https://linkedin.com/company/...",className:"w-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"website_url",className:"text-sm font-medium",children:"Website URL"}),(0,s.jsx)(u.Input,{id:"website_url",value:ev.website_url||"",onChange:e=>ey({...ev,website_url:e.target.value}),placeholder:"https://example.com",className:"w-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"keywords",className:"text-sm font-medium",children:"Tech Stack / Keywords (one per line)"}),(0,s.jsx)(x.Textarea,{id:"keywords",value:ev.keywords||"",onChange:e=>ey({...ev,keywords:e.target.value}),rows:6,placeholder:"Salesforce HubSpot AWS React",className:"w-full resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"sales_motion",className:"text-sm font-medium",children:"Sales Motion"}),(0,s.jsx)(x.Textarea,{id:"sales_motion",value:ev.sales_motion||"",onChange:e=>ey({...ev,sales_motion:e.target.value}),rows:4,placeholder:"Describe the company's sales approach...",className:"w-full resize-none"})]})]}),"persona"===ej.section&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"seniority",className:"text-sm font-medium",children:"Seniority"}),(0,s.jsx)(u.Input,{id:"seniority",value:ev.seniority||"",onChange:e=>ey({...ev,seniority:e.target.value}),placeholder:"e.g., VP, Director, Manager",className:"w-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"reports_to",className:"text-sm font-medium",children:"Reports To"}),(0,s.jsx)(u.Input,{id:"reports_to",value:ev.reports_to||"",onChange:e=>ey({...ev,reports_to:e.target.value}),placeholder:"e.g., Chief Revenue Officer",className:"w-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"department",className:"text-sm font-medium",children:"Department"}),(0,s.jsx)(u.Input,{id:"department",value:ev.department||"",onChange:e=>ey({...ev,department:e.target.value}),placeholder:"e.g., Sales, Marketing, Operations",className:"w-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"location",className:"text-sm font-medium",children:"Location"}),(0,s.jsx)(u.Input,{id:"location",value:ev.location||"",onChange:e=>ey({...ev,location:e.target.value}),placeholder:"e.g., New York, NY",className:"w-full"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"responsibilities",className:"text-sm font-medium",children:"Key Responsibilities (one per line)"}),(0,s.jsx)(x.Textarea,{id:"responsibilities",value:ev.responsibilities||"",onChange:e=>ey({...ev,responsibilities:e.target.value}),rows:6,placeholder:"Sales process optimization Team management Revenue forecasting",className:"w-full resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"pain_points",className:"text-sm font-medium",children:"Pain Points (one per line)"}),(0,s.jsx)(x.Textarea,{id:"pain_points",value:ev.pain_points||"",onChange:e=>ey({...ev,pain_points:e.target.value}),rows:6,placeholder:"Manual data entry Lack of automation Poor lead quality",className:"w-full resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"decision_authority_rationale",className:"text-sm font-medium",children:"Decision Authority Rationale"}),(0,s.jsx)(x.Textarea,{id:"decision_authority_rationale",value:ev.decision_authority_rationale||"",onChange:e=>ey({...ev,decision_authority_rationale:e.target.value}),rows:4,placeholder:"Explain decision-making authority...",className:"w-full resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.Label,{htmlFor:"decision_maker_likelihood",className:"text-sm font-medium",children:"Decision Maker Likelihood"}),(0,s.jsx)(u.Input,{id:"decision_maker_likelihood",value:ev.decision_maker_likelihood||"",onChange:e=>ey({...ev,decision_maker_likelihood:e.target.value}),placeholder:"e.g., High, Medium, Low",className:"w-full"})]})]})]}),(0,s.jsx)(m.SheetFooter,{className:"px-6 pb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,s.jsx)(r.Button,{variant:"outline",onClick:()=>ef({open:!1,section:null}),disabled:eN,className:"flex-1",children:"Cancel"}),(0,s.jsx)(r.Button,{onClick:eS,disabled:eN,className:"flex-1",children:eN?"Saving...":"Save All Changes"})]})})]})})]})]})}}]);