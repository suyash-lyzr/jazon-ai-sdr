module.exports=[53462,a=>{"use strict";a.s(["default",()=>x],53462);var b=a.i(87924),c=a.i(72131),d=a.i(55635),e=a.i(88621),f=a.i(91119),g=a.i(86304),h=a.i(99570),i=a.i(57468),j=a.i(11238),k=a.i(92258),l=a.i(63519),m=a.i(63588),n=a.i(5784),o=a.i(67552),p=a.i(99548),p=p,q=a.i(8406),r=a.i(77156),s=a.i(4720),t=a.i(80701),u=a.i(85259),v=a.i(21234),w=a.i(24348);function x(){let{leads:a}=(0,j.useJazonApp)(),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(new Set),[B,C]=(0,c.useState)(new Set),[D,E]=(0,c.useState)(new Set),F=(0,c.useMemo)(()=>0===a.length?null:a.find(a=>i.mockConversations[a.id]?.length>0)||a[0],[a]),G=x&&a.find(a=>a.id===x)||F,H=G&&i.mockConversations[G.id]||[],I=a=>{let b=new Date;if(a.includes("hour")){let c=parseInt(a.match(/(\d+)\s*hour/)?.[1]||"0");return new Date(b.getTime()-60*c*6e4)}if(a.includes("day")){let c=parseInt(a.match(/(\d+)\s*day/)?.[1]||"0");return new Date(b.getTime()-24*c*36e5)}if(a.includes("week")){let c=parseInt(a.match(/(\d+)\s*week/)?.[1]||"0");return new Date(b.getTime()-7*c*864e5)}return b},J=(0,c.useMemo)(()=>{if(0===H.length)return[];let a=[...H].sort((a,b)=>{let c=I(a.timestamp);return I(b.timestamp).getTime()-c.getTime()}),b={};return a.forEach((a,c)=>{let d=(a=>{let b=I(a),c=(new Date().getTime()-b.getTime())/36e5;return c<24?"Today":c<48?"Yesterday":c<168?"Earlier this week":"Older"})(a.timestamp);b[d]||(b[d]=[]),b[d].push({message:a,timeBucket:d,sortOrder:c})}),b},[H]),K=a=>{let b=[];return"voice"===a.channel&&"Qualified"===a.outcome?(b.push("Triggered escalation to voice"),b.push("Confirmed technical fit and budget authority")):"inbound"===a.direction&&"email"===a.channel?(b.push("Detected buying intent from response"),b.push("Confirmed active evaluation in progress")):"outbound"===a.direction&&"email"===a.channel?a.subject?.toLowerCase().includes("qualification")&&b.push("Initial outreach based on ICP score and triggers"):"linkedin"===a.channel&&"outbound"===a.direction&&(b.push("Multi-channel engagement strategy"),b.push("Building rapport before voice escalation")),0===b.length&&b.push("Part of multi-channel qualification sequence"),b},L=(()=>{if(!G||0===H.length)return{status:"No conversations yet",lastSignal:"N/A",health:"neutral"};let a=H[0],b=H.some(a=>"voice"===a.channel),c=H.some(a=>"inbound"===a.direction),d="",e="",f="neutral";return b&&"Qualified"===a.outcome?(d="Qualified via voice call",e="Budget confirmed in last call",f="positive"):c?(d="Engaged, awaiting response",e="Active evaluation confirmed",f="positive"):"Disqualified"===G.stage?(d="Disqualified due to low ICP",e="ICP score below threshold",f="stalled"):(d="Outreach in progress",e="No response yet",f="neutral"),{status:d,lastSignal:e,health:f}})(),M=a=>{let b=new Set(B);b.has(a)?b.delete(a):b.add(a),C(b)},N=(0,c.useMemo)(()=>{if(0===H.length)return 0;let a=H.filter(a=>"outbound"===a.direction).length,b=H.filter(a=>"inbound"===a.direction).length;return a>0?Math.round(b/a*100):0},[H]);return(0,b.jsxs)(e.SidebarProvider,{style:{"--sidebar-width":"calc(var(--spacing) * 60)","--header-height":"calc(var(--spacing) * 12)"},children:[(0,b.jsx)(d.JazonSidebar,{variant:"inset"}),(0,b.jsx)(e.SidebarInset,{children:(0,b.jsx)("div",{className:"flex flex-1 flex-col",children:(0,b.jsxs)("div",{className:"flex flex-1 flex-col gap-6 p-4 md:gap-8 md:p-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("h1",{className:"text-3xl font-semibold text-foreground",children:"Conversations"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Unified communication view across all channels"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 min-w-0 max-w-md",children:[(0,b.jsx)("label",{className:"text-xs text-muted-foreground shrink-0",children:"Lead:"}),(0,b.jsxs)(t.Select,{value:x||F?.id||"",onValueChange:y,children:[(0,b.jsx)(t.SelectTrigger,{className:"w-full",children:(0,b.jsx)(t.SelectValue,{placeholder:"Choose a lead"})}),(0,b.jsx)(t.SelectContent,{children:a.filter(a=>i.mockConversations[a.id]?.length>0).map(a=>(0,b.jsx)(t.SelectItem,{value:a.id,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium",children:a.name}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:["• ",a.company]}),(0,b.jsxs)(g.Badge,{variant:"outline",className:"ml-auto text-xs",children:["ICP ",a.icpScore]}),(0,b.jsx)(g.Badge,{variant:"secondary",className:"text-xs",children:a.stage})]})},a.id))})]})]})]}),G&&(0,b.jsx)("div",{className:"bg-muted/30 rounded-lg border border-border/50 p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1",children:"Current Stage"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:G.stage})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1",children:"AI Conversation Status"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:L.status})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1",children:"Last Meaningful Signal"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:L.lastSignal})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1",children:"Conversation Health"}),(0,b.jsx)(g.Badge,{variant:"positive"===L.health?"default":"stalled"===L.health?"destructive":"secondary",className:"text-xs",children:"positive"===L.health?"Positive":"stalled"===L.health?"Stalled":"Neutral"})]})]})}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Conversation Timeline"}),(0,b.jsx)(f.CardDescription,{children:"Chronological view of all interactions across email, LinkedIn, and voice"})]}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)(w.Alert,{className:"mb-6",children:[(0,b.jsx)(p.default,{className:"h-4 w-4"}),(0,b.jsx)(w.AlertDescription,{className:"text-xs",children:"This timeline shows the exact messages exchanged across channels. Messaging actions and strategy controls are managed in the Outreach Campaign."})]}),0===H.length?(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No conversations yet"})}):(0,b.jsx)("div",{className:"space-y-8",children:Object.entries(J).map(([a,c])=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("div",{className:"h-px flex-1 bg-border"}),(0,b.jsx)("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide px-2",children:a}),(0,b.jsx)("div",{className:"h-px flex-1 bg-border"})]}),(0,b.jsx)("div",{className:"space-y-6",children:c.map(({message:a},d)=>(0,b.jsxs)("div",{className:"relative",children:[d<c.length-1&&(0,b.jsx)("div",{className:"absolute left-[22px] top-12 bottom-0 w-px bg-border"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:`flex-shrink-0 w-11 h-11 rounded-full flex items-center justify-center ${"email"===a.channel?"bg-primary/10 text-primary":"voice"===a.channel?"bg-chart-2/10 text-chart-2":"bg-chart-3/10 text-chart-3"}`,children:["email"===a.channel&&(0,b.jsx)(k.Mail,{className:"w-5 h-5"}),"voice"===a.channel&&(0,b.jsx)(l.Phone,{className:"w-5 h-5"}),"linkedin"===a.channel&&(0,b.jsx)(m.MessageSquare,{className:"w-5 h-5"})]}),(0,b.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:a.channel}),(0,b.jsx)(g.Badge,{variant:"inbound"===a.direction?"default":"secondary",className:"text-xs",children:a.direction})]}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.timestamp})]}),a.subject&&(0,b.jsx)("h4",{className:"font-semibold text-sm",children:a.subject}),"voice"===a.channel&&a.summary?(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)("div",{className:"bg-muted/50 p-3 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Duration"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.duration})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Outcome"}),(0,b.jsx)(g.Badge,{variant:"default",className:"text-xs",children:a.outcome})]})]}),(0,b.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:()=>(a=>{let b=new Set(z);b.has(a)?b.delete(a):b.add(a),A(b)})(a.id),children:z.has(a.id)?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.ChevronUp,{className:"w-4 h-4 mr-1"}),"Hide Details"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.ChevronDown,{className:"w-4 h-4 mr-1"}),"Show Details"]})})]}),z.has(a.id)&&(0,b.jsxs)("div",{className:"pt-3 border-t space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(q.Sparkles,{className:"w-4 h-4 text-primary"}),(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"AI Call Summary"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium mb-1",children:"Key Points Discussed"}),(0,b.jsx)("p",{className:"text-sm",children:a.summary})]}),a.objections&&a.objections.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium mb-1",children:"Objections Raised"}),(0,b.jsx)("ul",{className:"space-y-1.5",children:a.objections.map((a,c)=>(0,b.jsxs)("li",{className:"text-sm flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-destructive mt-0.5",children:"•"}),(0,b.jsx)("span",{children:a})]},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium mb-1",children:"Signals Detected"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:"Budget: Confirmed"}),(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:"Authority: Economic buyer"}),(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:"Timeline: Q1"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium mb-1",children:"Impact on Qualification Decision"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Voice call confirmed all BANT criteria. Lead qualified and escalated to AE handoff."})]})]})]}),a.scriptUsed&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(s.FileText,{className:"w-4 h-4 text-primary"}),(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Script Used (AI-Generated)"})]}),(0,b.jsx)("div",{className:"bg-background rounded-lg p-4 border border-border/30",children:(0,b.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap text-foreground leading-relaxed",children:a.scriptUsed})})]})]}),(0,b.jsxs)(v.Collapsible,{open:B.has(a.id),onOpenChange:()=>M(a.id),children:[(0,b.jsx)(v.CollapsibleTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",className:"w-full justify-start text-xs text-muted-foreground",children:[(0,b.jsx)(q.Sparkles,{className:"w-3 h-3 mr-1"}),"Why this interaction mattered",B.has(a.id)?(0,b.jsx)(o.ChevronUp,{className:"w-3 h-3 ml-auto"}):(0,b.jsx)(n.ChevronDown,{className:"w-3 h-3 ml-auto"})]})}),(0,b.jsx)(v.CollapsibleContent,{children:(0,b.jsxs)("div",{className:"pt-2 border-t mt-2",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"AI Insight"}),(0,b.jsx)("ul",{className:"space-y-1.5",children:K(a).map((a,c)=>(0,b.jsxs)("li",{className:"text-xs flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),(0,b.jsx)("span",{children:a})]},c))})]})})]})]})}):(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"bg-muted/30 rounded-lg p-3",children:(0,b.jsx)("p",{className:"text-sm",children:a.content})}),a.body&&(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",onClick:()=>(a=>{let b=new Set(D);b.has(a)?b.delete(a):b.add(a),E(b)})(a.id),className:"w-full justify-start text-xs",children:[(0,b.jsx)(r.Eye,{className:"w-3 h-3 mr-2"}),D.has(a.id)?"Hide":"View"," Full Message Content",D.has(a.id)?(0,b.jsx)(o.ChevronUp,{className:"w-3 h-3 ml-auto"}):(0,b.jsx)(n.ChevronDown,{className:"w-3 h-3 ml-auto"})]}),D.has(a.id)&&a.body&&(0,b.jsxs)("div",{className:"bg-background rounded-lg p-4 border border-border/30 space-y-3",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:"email"===a.channel?"Email Content":"linkedin"===a.channel?"LinkedIn Message":"WhatsApp Message"}),(0,b.jsx)(g.Badge,{variant:"secondary",className:"text-xs",children:a.direction}),a.aiGenerated&&(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs bg-primary/5 border-primary/20",children:"AI-generated"})]})}),a.subject&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Subject"}),(0,b.jsx)("p",{className:"text-sm font-medium",children:a.subject})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Message Body"}),(0,b.jsx)("div",{className:"bg-muted/30 rounded-lg p-4 border border-border/30",children:(0,b.jsx)("pre",{className:"text-sm whitespace-pre-wrap text-foreground leading-relaxed font-sans",children:a.body})})]}),a.personalizationTokens&&a.personalizationTokens.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Personalization Tokens Used"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:a.personalizationTokens.map((a,c)=>(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:a},c))})]}),(0,b.jsx)("div",{className:"pt-2 border-t text-xs text-muted-foreground",children:"This shows the exact content sent to the lead for full transparency and auditability."})]}),(0,b.jsxs)(v.Collapsible,{open:B.has(a.id),onOpenChange:()=>M(a.id),children:[(0,b.jsx)(v.CollapsibleTrigger,{asChild:!0,children:(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",className:"w-full justify-start text-xs text-muted-foreground",children:[(0,b.jsx)(q.Sparkles,{className:"w-3 h-3 mr-1"}),"Why this interaction mattered",B.has(a.id)?(0,b.jsx)(o.ChevronUp,{className:"w-3 h-3 ml-auto"}):(0,b.jsx)(n.ChevronDown,{className:"w-3 h-3 ml-auto"})]})}),(0,b.jsx)(v.CollapsibleContent,{children:(0,b.jsxs)("div",{className:"pt-2 border-t mt-2",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"AI Insight"}),(0,b.jsx)("ul",{className:"space-y-1.5",children:K(a).map((a,c)=>(0,b.jsxs)("li",{className:"text-xs flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-primary mt-0.5",children:"•"}),(0,b.jsx)("span",{children:a})]},c))})]})})]})]})]})]})]},a.id))})]},a))})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm",children:"Channel Breakdown"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k.Mail,{className:"w-4 h-4 text-primary"}),(0,b.jsx)("span",{className:"text-sm",children:"Email"})]}),(0,b.jsx)("span",{className:"text-sm font-medium",children:H.filter(a=>"email"===a.channel).length})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.MessageSquare,{className:"w-4 h-4 text-chart-3"}),(0,b.jsx)("span",{className:"text-sm",children:"LinkedIn"})]}),(0,b.jsx)("span",{className:"text-sm font-medium",children:H.filter(a=>"linkedin"===a.channel).length})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Phone,{className:"w-4 h-4 text-chart-2"}),(0,b.jsx)("span",{className:"text-sm",children:"Voice"})]}),(0,b.jsx)("span",{className:"text-sm font-medium",children:H.filter(a=>"voice"===a.channel).length})]})]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.CardTitle,{className:"text-sm",children:"Engagement Rate"}),(0,b.jsx)(u.TooltipProvider,{children:(0,b.jsxs)(u.Tooltip,{children:[(0,b.jsx)(u.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(p.default,{className:"w-3 h-3 text-muted-foreground cursor-help"})}),(0,b.jsx)(u.TooltipContent,{className:"max-w-xs",children:(0,b.jsx)("p",{className:"text-xs",children:"Engagement counts inbound responses (email replies, LinkedIn messages) within 7 days of outbound outreach. Voice calls are not included in this calculation."})})]})})]})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)("div",{className:"text-3xl font-bold",children:[N,"%"]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[H.filter(a=>"inbound"===a.direction).length," responses to"," ",H.filter(a=>"outbound"===a.direction).length," outreach"]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{className:"pb-3",children:(0,b.jsx)(f.CardTitle,{className:"text-sm",children:"Voice Calls"})}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-chart-2",children:H.filter(a=>"voice"===a.channel).length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Strategic qualification calls"})]})]})]})]})})})]})}}];

//# sourceMappingURL=src_app_conversations_page_tsx_afeceee4._.js.map