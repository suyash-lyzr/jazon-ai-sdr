{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///Users/suyashmankar/Desktop/LYZR/Jazon%20-%20AI%20SDR/AI-SDR-APP/AI-SDR/src/lib/mongodb.ts"],"sourcesContent":["import mongoose from 'mongoose';\n\n/**\n * Global is used here to maintain a cached connection across hot reloads\n * in development. This prevents connections growing exponentially\n * during API Route usage.\n */\ndeclare global {\n  var mongoose: {\n    conn: typeof mongoose | null;\n    promise: Promise<typeof mongoose> | null;\n  };\n}\n\nlet cached = global.mongoose;\n\nif (!cached) {\n  cached = global.mongoose = { conn: null, promise: null };\n}\n\nasync function connectDB() {\n  let MONGODB_URI = process.env.MONGODB_URI;\n\n  if (!MONGODB_URI) {\n    throw new Error(\n      'Please define the MONGODB_URI environment variable inside .env.local'\n    );\n  }\n\n  // Remove quotes if present\n  MONGODB_URI = MONGODB_URI.replace(/^[\"']|[\"']$/g, '');\n\n  // If we have a cached connection, return it\n  if (cached.conn) {\n    return cached.conn;\n  }\n\n  // If we don't have a cached promise, create one\n  if (!cached.promise) {\n    const opts = {\n      bufferCommands: false,\n    };\n\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongoose) => {\n      console.log('âœ… MongoDB connected successfully');\n      return mongoose;\n    });\n  }\n\n  try {\n    cached.conn = await cached.promise;\n  } catch (e) {\n    cached.promise = null;\n    throw e;\n  }\n\n  return cached.conn;\n}\n\nexport default connectDB;\n\n"],"names":[],"mappings":";;;;AAAA;;AAcA,IAAI,SAAS,OAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACX,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACzD;AAEA,eAAe;IACb,IAAI,cAAc,QAAQ,GAAG,CAAC,WAAW;IAEzC,IAAI,CAAC,aAAa;QAChB,MAAM,IAAI,MACR;IAEJ;IAEA,2BAA2B;IAC3B,cAAc,YAAY,OAAO,CAAC,gBAAgB;IAElD,4CAA4C;IAC5C,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,gDAAgD;IAChD,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,aAAa,MAAM,IAAI,CAAC,CAAC;YACzD,QAAQ,GAAG,CAAC;YACZ,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe","debugId":null}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///Users/suyashmankar/Desktop/LYZR/Jazon%20-%20AI%20SDR/AI-SDR-APP/AI-SDR/src/app/api/test-db/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport connectDB from \"@/lib/mongodb\";\nimport mongoose from \"mongoose\";\n\nexport const runtime = \"nodejs\";\n\nexport async function GET() {\n  try {\n    // Check if MONGODB_URI is set\n    const mongoUri = process.env.MONGODB_URI;\n    \n    if (!mongoUri) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: \"MONGODB_URI environment variable is not set\",\n          message: \"Please create a .env.local file with MONGODB_URI\",\n        },\n        { status: 500 }\n      );\n    }\n\n    // Check current connection state\n    const connectionState = mongoose.connection.readyState;\n    const states = {\n      0: \"disconnected\",\n      1: \"connected\",\n      2: \"connecting\",\n      3: \"disconnecting\",\n    };\n\n    // Try to connect\n    await connectDB();\n\n    // Get connection info\n    const connection = mongoose.connection;\n    const dbName = connection.db?.databaseName;\n    const host = connection.host;\n    const port = connection.port;\n    const collections = await connection.db?.listCollections().toArray();\n\n    return NextResponse.json(\n      {\n        success: true,\n        message: \"Database connection successful!\",\n        connection: {\n          state: states[connectionState as keyof typeof states] || \"unknown\",\n          database: dbName,\n          host: host,\n          port: port,\n          collections: collections?.map((c) => c.name) || [],\n        },\n        environment: {\n          mongoUriSet: !!mongoUri,\n          uriPreview: mongoUri\n            ? `${mongoUri.split(\"@\")[0]}@${mongoUri.split(\"@\")[1]?.split(\"/\")[0]}...`\n            : \"not set\",\n        },\n      },\n      { status: 200 }\n    );\n  } catch (error: any) {\n    console.error(\"Database connection test error:\", error);\n    return NextResponse.json(\n      {\n        success: false,\n        error: \"Database connection failed\",\n        message: error.message || \"Unknown error occurred\",\n        details: error.toString(),\n      },\n      { status: 500 }\n    );\n  }\n}\n\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,MAAM,UAAU;AAEhB,eAAe;IACpB,IAAI;QACF,8BAA8B;QAC9B,MAAM,WAAW,QAAQ,GAAG,CAAC,WAAW;QAExC,IAAI,CAAC,UAAU;YACb,OAAO,gJAAY,CAAC,IAAI,CACtB;gBACE,SAAS;gBACT,OAAO;gBACP,SAAS;YACX,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,iCAAiC;QACjC,MAAM,kBAAkB,oHAAQ,CAAC,UAAU,CAAC,UAAU;QACtD,MAAM,SAAS;YACb,GAAG;YACH,GAAG;YACH,GAAG;YACH,GAAG;QACL;QAEA,iBAAiB;QACjB,MAAM,IAAA,kIAAS;QAEf,sBAAsB;QACtB,MAAM,aAAa,oHAAQ,CAAC,UAAU;QACtC,MAAM,SAAS,WAAW,EAAE,EAAE;QAC9B,MAAM,OAAO,WAAW,IAAI;QAC5B,MAAM,OAAO,WAAW,IAAI;QAC5B,MAAM,cAAc,MAAM,WAAW,EAAE,EAAE,kBAAkB;QAE3D,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS;YACT,YAAY;gBACV,OAAO,MAAM,CAAC,gBAAuC,IAAI;gBACzD,UAAU;gBACV,MAAM;gBACN,MAAM;gBACN,aAAa,aAAa,IAAI,CAAC,IAAM,EAAE,IAAI,KAAK,EAAE;YACpD;YACA,aAAa;gBACX,aAAa,CAAC,CAAC;gBACf,YAAY,WACR,GAAG,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,SAAS,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,GACvE;YACN;QACF,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;YACP,SAAS,MAAM,OAAO,IAAI;YAC1B,SAAS,MAAM,QAAQ;QACzB,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}